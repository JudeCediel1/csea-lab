% reads besa-generated MN-avr_files% --> they have weird headers.function [data, latencies] = read_avr_MN(filename);if nargin==0,		% No name specified	[name, pathname] = uigetfile('*', 'Choose a BESA-*.avr-file!');	filename = sprintf('%s%s', pathname, name);end;fid = fopen(filename, 'r');line = fgetl(fid);[dummy, remainder] = strtok(line);if strcmp(dummy(1:5), 'Npts=')==0, disp('1This is not an *.avr-header!!!'); fclose(fid); return; end;nr_timepoints = str2num(dummy(6:8))[dummy, remainder] = strtok(remainder);			% Number of timepoints (number of columns)if strcmp(dummy(1:4), 'TSB=')==0, disp('2This is not an *.avr-header!!!'); fclose(fid); return; end;offset = str2num(dummy(5:10))[dummy, remainder] = strtok(remainder);				% Begin of latency rangeif strcmp(dummy(1:3), 'DI=')==0, disp('3This is not an *.avr-header!!!'); fclose(fid); return; end;sample_int = str2num(dummy(4:8))[dummy, remainder] = strtok(remainder);if strcmp(dummy, 'SB=')==0, disp('4This is not an *.avr-header!!!'); fclose(fid); return; end;[dummy, remainder] = strtok(remainder)	;				% Number of bins per microvoltnr_bins = str2num(dummy)[dummy, remainder] = strtok(remainder);if strcmp(dummy, 'SC=')==0, disp('5This is not an *.avr-header!!!'); fclose(fid); return; end;[dummy, remainder] = strtok(remainder);					% Calibration factorcalib = str2num(dummy)latencies = offset:sample_int:(nr_timepoints-1)*sample_int+offset;dummies = fgetl(fid);data = fscanf(fid, '%f', [nr_timepoints, inf]);data = data';fclose(fid);