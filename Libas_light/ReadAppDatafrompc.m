%==================================================================%%	ReadAppData.m%%	Markus Junghoefer	[1996]%%%	%	Function definition	function [Data,Version,LHeader,ScaleBins,NChan,NPoints,NTrials,SampRate,chAvgRef,File,Path,FilePath]=...	ReadAppDatafromPC(FilePath,ActTrial,ActChan,ActPoint,PlotStatus,FilterSpec);	%=================================================================if nargin<6; FilterSpec='*.app*'; end;if nargin<5;PlotStatus=0;end;if nargin<4;ActPoint=[];end;if nargin<3;ActChan=[];end;if nargin<2;ActTrial=1;end;if nargin<1;FilePath=[];end;	[File,Path,FilePath]=ReadFilePath(FilePath,FilterSpec,'Please choose an app file:');if File==0; return; endFileFid=fopen(FilePath,'r', 'l');Version=fread(FileFid,1,'int16');LHeader=fread(FileFid,1,'int16');ScaleBins=fread(FileFid,1,'int16');NChan=fread(FileFid,1,'int16');NPoints=fread(FileFid,1,'int16');NTrials=fread(FileFid,1,'int16');SampRate=fread(FileFid,1,'int16');chAvgRef=fread(FileFid,1,'int16');ActTrial=ActTrialLHeader+(ActTrial-1).*NChan.*NPoints.*2if ActTrial>NTrials; 	fprintf('ActTrial>NTrials in ReadAppData'); return; endif ActChan>NChan; 		fprintf('ActChan>NChan in ReadAppData'); return; endif ActPoint>NPoints; 	fprintf('ActPoint>NPoints in ReadAppData'); return; endSeekStatus=fseek(FileFid,LHeader+(ActTrial-1).*NChan.*NPoints.*2,-1);if SeekStatus==-1; Message=ferror(FileFid); fprintf(Message); error('fseek2 error in ReadAppData'); end				[Data,Count]=fread(FileFid,[NPoints NChan],'int16');if Count~=NPoints.*NChan; fprintf('Count~=NPoints.*NChan in ReadAppData'); return; endif ~isempty(ActChan) & isempty(ActPoint); 	Data=Data(:,ActChan); elseif isempty(ActChan) & ~isempty(ActPoint); 	Data=Data(ActPoint,:); elseif ~isempty(ActChan) & ~isempty(ActPoint);	Data=Data(ActPoint,ActChan); endData=Data'./ScaleBins;if PlotStatus; plot(Data); endfclose(FileFid);return;