function [Korrekt_T2givenT1] = get_ERTS_ABexpo(filename)fid = fopen(filename)% dummylinesdumline = fgetl(fid);dumline = fgetl(fid);dumline = fgetl(fid);dumline = fgetl(fid);dumline = fgetl(fid);dumline = fgetl(fid);dumline = fgetl(fid);dumline = fgetl(fid);dumline = fgetl(fid);line = 1index = 1			while line > 0				% read data				line = fgets(fid);		if length(line) <5, break, return, end				trialnum = str2num(line(29:31));				%if trialnum ~= index, error('falsch'), end				RTvecKey1(index) = str2num(line(38:44));		RTvecKey2(index) = str2num(line(46:52));				T1_vec(index) = double(line(54));		T2_vec(index) = double(line(61));				trial_art = line(76:82);				% infer conditions				% 1=LAG1-A, 2=LAG3-A, 3=LAG5-A, 4=LAG1-N, 5=LAG3-N, 6=LAG5-N, 		% 7=LAG1-U, 8=LAG3-U, 9=LAG5-U 				if trial_art == 'LAG1-GE', condition_vec(index) = 1;		elseif trial_art == 'LAG3-GE', condition_vec(index) = 2;		elseif trial_art == 'LAG5-GE', condition_vec(index) = 3;		elseif trial_art == 'LAG1-NE', condition_vec(index) = 4;		elseif trial_art == 'LAG3-NE', condition_vec(index) = 5;        elseif trial_art == 'LAG5-NE', condition_vec(index) = 6;		else condition_vec(index) = 0;		end						index = index + 1;				% for correctflag	endstatmat = [condition_vec' RTvecKey1' RTvecKey2' T1_vec' T2_vec']% infer correctI1=find(statmat(:,1)==1)lag1seenmat=statmat(I1,:); I2=find(statmat(:,1)==2);lag3seenmat=statmat(I2,:);I3=find(statmat(:,1)==3);lag5seenmat=statmat(I3,:);I4=find(statmat(:,1)==4);lag1Newmat=statmat(I4,:);I5=find(statmat(:,1)==5);lag3Newmat=statmat(I5,:);I6=find(statmat(:,1)==6);lag5Newmat=statmat(I6,:);% Solution T1solution_T1_lag1N = [69 69 72 72 77	79	65	75	65	66	77	83	75	66	82 84	76	71	90	70	70	83	65	68	68	71	65	83	66	83]';Ia=find(lag1seenmat(:,4)==solution_T1_lag1N(:,1) | lag1seenmat(:,5)==solution_T1_lag1N(:,1))Korrekt_T1_lag1N=size(Ia,1)/30*100solution_T1_lag3N = [82	72	65	79	77	69	75	83	66	75	72	77	66	65	69	83	68	66	68	76	83	65	65	84	71	70	71	90	83	70]';Ib=find(lag3seenmat(:,4)==solution_T1_lag3N(:,1) | lag3seenmat(:,5)==solution_T1_lag3N(:,1));Korrekt_T1_lag3N=size(Ib,1)/30*100solution_T1_lag5N = [75	65	77	75	69	72	72	77	65	69	66	83	79	82	66	70	65	83	68	66	68	90	84	71	83	71	76	83	65	70]';Ic=find(lag5seenmat(:,4)==solution_T1_lag5N(:,1) | lag5seenmat(:,5)==solution_T1_lag5N(:,1));Korrekt_T1_lag5N=size(Ic,1)/30*100% Solution T2solution_T2_Seen = [65 89 66 90 79 65 78 69 74 79]';Index_seen=find(lag1seenmat(:,5)==solution_T2_Seen(:,1) | lag1seenmat(:,4)==solution_T2_Seen(:,1));Korrekt_T2_lag1N=size(Ik,1)/30*100;a = 0;n = 1;while length(Ik) >= n      z = Ik(n) == Ib;    n = n + 1;    if sum(z) > 0,     a = a + 1; endendKorrekt_T2givenT1_lag1N=a/size(Ib,1)*100;solution_T2_new = [87 88 74 85 69 71 83 65 66 66]';Index_new=find(lag1U(:,5)==solution_T2_lag1U(:,1) | lag1U(:,4)==solution_T2_lag1U(:,1));Korrekt_T2_lag1U=size(Il,1)/30*100;a = 0;n = 1;while length(Il) >= n      z = Il(n) == Ic;    n = n + 1;    if sum(z) > 0,     a = a + 1; endendKorrekt_T2givenT1_lag1U=a/size(Ic,1)*100;solution_T2_lag3A = [70	84	83	84	75	83	86	65	69	70	83	66	83	76	71	66	74	75	74	86	66	66	76	66	66	83	69	69	70	86]';Im=find(lag3A(:,5)==solution_T2_lag3A(:,1) | lag3A(:,4)==solution_T2_lag3A(:,1));Korrekt_T2_lag3A=size(Im,1)/30*100;a = 0;n = 1;while length(Im) >= n      z = Im(n) == Id;    n = n + 1;    if sum(z) > 0,     a = a + 1; endendKorrekt_T2givenT1_lag3A=a/size(Id,1)*100;solution_T2_lag3N = [69	83	83	66	83	66	66	65	77	70	83	69	86	75	77	82	70	83	71	65	66	83	66	77	83	76	78	65	77	76]';In=find(lag3N(:,5)==solution_T2_lag3N(:,1) | lag3N(:,4)==solution_T2_lag3N(:,1));Korrekt_T2_lag3N=size(In,1)/30*100;a = 0;n = 1;while length(In) >= n      z = In(n) == Ie;    n = n + 1;    if sum(z) > 0,     a = a + 1; endendKorrekt_T2givenT1_lag3N=a/size(Ie,1)*100;solution_T2_lag3U = [75	83	84	70	80	77	83	80	86	90	86	82	69	87	83	68	76	83	86	83	81	83	77	85	72	65	86	80	77	65]';Io=find(lag3U(:,5)==solution_T2_lag3U(:,1) | lag3U(:,4)==solution_T2_lag3U(:,1));Korrekt_T2_lag3U=size(Io,1)/30*100;a = 0;n = 1;while length(Io) >= n      z = Io(n) == If;    n = n + 1;    if sum(z) > 0,     a = a + 1; endendKorrekt_T2givenT1_lag3U=a/size(If,1)*100;solution_T2_lag5A = [66	75	70	84	84	70	69	86	76	83	83	65	83	83	71	69	66	66	86	74	66	83	76	86	75	74	70	69	66	66]';Ip=find(lag5A(:,5)==solution_T2_lag5A(:,1) | lag5A(:,4)==solution_T2_lag5A(:,1));Korrekt_T2_lag5A=size(Ip,1)/30*100;a = 0;n = 1;while length(Ip) >= n      z = Ip(n) == Ig;    n = n + 1;    if sum(z) > 0,     a = a + 1; endendKorrekt_T2givenT1_lag5A=a/size(Ig,1)*100;solution_T2_lag5N = [69	83	83	69	75	77	77	83	70	83	86	66	66	66	65	66	83	76	83	82	71	83	70	65	77	76	66	78	77	65]';Iq=find(lag5N(:,5)==solution_T2_lag5N(:,1) | lag5N(:,4)==solution_T2_lag5N(:,1));Korrekt_T2_lag5N=size(Iq,1)/30*100;a = 0;n = 1;while length(Iq) >= n      z = Iq(n) == Ih;    n = n + 1;    if sum(z) > 0,     a = a + 1; endendKorrekt_T2givenT1_lag5N=a/size(Ih,1)*100;solution_T2_lag5U = [83	86	75	86	87	80	84	83	83	90	70	80	69	77	82	65	68	76	65	77	83	85	83	72	80	83	81	86	86	77]';Ir=find(lag5U(:,5)==solution_T2_lag5U(:,1) | lag5U(:,4)==solution_T2_lag5U(:,1));Korrekt_T2_lag5U=size(Ir,1)/30*100;a = 0;n = 1;while length(Ir) >= n      z = Ir(n) == Ii;    n = n + 1;    if sum(z) > 0,     a = a + 1; endendKorrekt_T2givenT1_lag5U=a/size(Ii,1)*100;Korrekt = [1 2 3 4 5 6 7 8 9;Korrekt_T1_lag1A Korrekt_T1_lag1N Korrekt_T1_lag1U Korrekt_T1_lag3A Korrekt_T1_lag3N...Korrekt_T1_lag3U Korrekt_T1_lag5A Korrekt_T1_lag5N Korrekt_T1_lag5U;...Korrekt_T2_lag1A Korrekt_T2_lag1N Korrekt_T2_lag1U Korrekt_T2_lag3A Korrekt_T2_lag3N...Korrekt_T2_lag3U Korrekt_T2_lag5A Korrekt_T2_lag5N Korrekt_T2_lag5U]';Korrekt_T1=Korrekt(:,2)'Korrekt_T2andT1=Korrekt(:,3)'Korrekt_T2givenT1 = [Korrekt_T2givenT1_lag1A Korrekt_T2givenT1_lag1N Korrekt_T2givenT1_lag1U Korrekt_T2givenT1_lag3A Korrekt_T2givenT1_lag3N...Korrekt_T2givenT1_lag3U Korrekt_T2givenT1_lag5A Korrekt_T2givenT1_lag5N Korrekt_T2givenT1_lag5U]hold on, plot(Korrekt_T2givenT1(1:3), 'r')hold on, plot(Korrekt_T2givenT1(4:6), 'b')hold on, plot(Korrekt_T2givenT1(7:9), 'k')ylabel('Prozent Korrekt')xlabel('Angenehm - Neutral - Unangenehm')axis([1 3 0 100])eval(['save ' filename(1:3) '_T1  Korrekt_T1'])eval(['save ' filename(1:3) '_T2andT1  Korrekt_T2andT1'])eval(['save ' filename(1:3) '_T2givenT1  Korrekt_T2givenT1'])fclose('all')