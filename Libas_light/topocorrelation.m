% topocorrelation% determines correlation maps for topographies % function [topocorrmat] = topocorrelation(filemat, bslvec, mat4corr)% read EEG data in matrix, wth subjects as columnsfor subject = 1:size(filemat,1);        a = ReadAvgFile(deblank(filemat(subject,:)));    if ~isempty(bslvec), a = bslcorr(a, bslvec); end   mat4EEG(:, subject) = a;      end% compute correlations for each column of mat4corrfor col = 1:size(mat4corr,2)        for sensor = 1:size(mat4EEG,1);              topocorrmat(sensor) = corr(mat4EEG(sensor,:)', mat4corr(:, col), 'type', 'spearman',  'rows', 'complete');        end        topocorrmat = column(topocorrmat);         SaveAvgFile(['corrallsubjects.at' num2str(col) '.ar'],topocorrmat,[],[], ...        [],[],[],[],[],[],[]); end% topomatfishZ = 0.5*log((1+topocorrmat)./(1-topocorrmat));% % SaveAvgFile('corrallsubjectsFishz.at.ar',topomatfishZ,NTrialAvgVec,StdChanTimeMat, ...%     SampRate,MedMedRawVec,MedMedAvgVec,EegMegStatus,NChanExtra,TrigPoint,HybridFactor); % %     