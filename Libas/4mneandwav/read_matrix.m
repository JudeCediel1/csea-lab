% Read matrix or rows with different lengths% If "m", "n" and "name" are given, an [m n] (sub-)matrix is read from file "name"% If "n" is empty, every row is read separately and may have different length. The number % of elements for each row is output in "columns"% The rows of "matrix" are filled with zeroes if necessary% OH 7.7.99function [matrix, name, columns]=read_matrix(m, n, name);if nargin==0,   disp(' [matrix, name, columns]=read_matrix(m, n, name); ');   return;end;if nargin==2 | isempty(name),		% No name specified	[filename, pathname] = uigetfile('*.*', 'Choose the file with the matrix!');	name = sprintf('%s%s', pathname, filename);end;if isempty(n),			% No dimension specified   fid = fopen(name, 'r');   line = fgetl(fid);   counter = 1;   while isstr(line),      if length(line)>0,         row = str2num(line);         columns(counter) = length(row);         matrix(counter,1:columns(counter)) = row;         counter = counter+1;      end;      line = fgetl(fid);   end;else					% Read matrix with given dimensions	fid = fopen(name, 'r');	matrix = fscanf(fid, '%g', [n m]);   matrix = matrix';   [m n] = size(matrix);   columns(1:m) = n;end;fclose(fid);return;