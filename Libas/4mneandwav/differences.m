% Compute a measure of symmetry for every column of a given data matrix, when a list of% pairs of channels is provided% Depending on "norm_flag", this measure differs in the kind of normalization or whether absolute values% of differences or the signed differences are taken into account% OH 27.11.97, 14.12.97, 16.02.98, 14.04.98% uses norm_col, write_matrixfunction val = differences(matrix, pairs, norm_flag, filename);if nargin==0,   disp(' val = differences(matrix, pairs, norm_flag, filename); ');   return;end;[m n] = size(pairs);if n==2 & m>n,   pairs = pairs';end;if strcmp(norm_flag, 'lat'),			% Sum of (differences/absolute values))   diffmat = matrix(pairs(1,:),:) - matrix(pairs(2,:),:);   summat = abs(matrix(pairs(1,:),:)) + abs(matrix(pairs(2,:),:));   val = mean(diffmat./summat)';end;if strcmp(norm_flag, 'normlat'),			% Sum of differences/biggest possible difference   diffmat = matrix(pairs(1,:),:) - matrix(pairs(2,:),:);   summat = abs(matrix(pairs(1,:),:)) + abs(matrix(pairs(2,:),:));   val = (sum(diffmat)./sum(summat))';end;if strcmp(norm_flag, 'latabs'),			% Sum of (differences/absolute values))   diffmat = abs(matrix(pairs(1,:),:)) - abs(matrix(pairs(2,:),:));   summat = abs(matrix(pairs(1,:),:)) + abs(matrix(pairs(2,:),:));   val = mean(diffmat./summat)';end;if strcmp(norm_flag, 'normlatabs'),			% Sum of differences/biggest possible difference   diffmat = abs(matrix(pairs(1,:),:)) - abs(matrix(pairs(2,:),:));   summat = abs(matrix(pairs(1,:),:)) + abs(matrix(pairs(2,:),:));   val = (sum(diffmat)./sum(summat))';end;if strcmp(norm_flag, 'diff'),			% Simple mean of differences   diffmat = matrix(pairs(1,:),:) - matrix(pairs(2,:),:);   val = mean(diffmat)';end;if strcmp(norm_flag, 'diffnorm'),			% Sum of differences / L2-Norm   diffmat = matrix(pairs(1,:),:) - matrix(pairs(2,:),:);   norm = sqrt(norm_col(matrix(pairs(1,:),:), 2) + norm_col(matrix(pairs(2,:),:), 2));   val = sum(diffmat)'./norm;end;if strcmp(norm_flag, 'diffnormabs'),			% Sum of abs(differences) / L2-Norm   diffmat = abs(matrix(pairs(1,:),:) - matrix(pairs(2,:),:));   norm = sqrt(norm_col(matrix(pairs(1,:),:), 2) + norm_col(matrix(pairs(2,:),:), 2));   val = sum(diffmat)'./norm;end;if strcmp(norm_flag, 'abs'),			% Sum of (differences of absolute values / L2-norm)   diffmat = abs(matrix(pairs(1,:),:)) - abs(matrix(pairs(2,:),:));   quotmat = sqrt(matrix(pairs(1,:),:).^2 + matrix(pairs(2,:),:).^2);   val = mean(diffmat./quotmat)';end;if strcmp(norm_flag, 'sign'),			% Sum of (differences / L2-norm)   diffmat = matrix(pairs(1,:),:) - matrix(pairs(2,:),:);   quotmat = sqrt(matrix(pairs(1,:),:).^2 + matrix(pairs(2,:),:).^2);   val = mean(diffmat./quotmat)';end;if ~isempty(filename),   [m n] = size(val);   write_matrix(val, filename, m, n);end;