function [diff, data] = symm_all(pathname, namelist, pairs);if nargin==0,   disp(' [diff, data] = symm_all(pathname, namelist, pairs); ');   return;end;nr_names = length(namelist(:,1));disp('Reading in data, average referencing');for i=1:nr_names,				% Reading in additional files	name = sprintf('%s\\%s', pathname, namelist(i,:));	disp(name);   [matrix, latencies] = read_avr(name);   TSB(i) = latencies(1);   if length(latencies)>1, DI(i)=latencies(2)-latencies(1); else DI(i)=1; end;   [m(i) n(i)] = size(matrix);    data(:,1:n(i), i) =  matrix;	data(:,1:n(i), i) = avg_ref(data(:,1:n(i), i));	n(i)end;disp('Computing symmetry measure for potentials');for i=1:nr_names,   diffl(1:n(i),i) = differences(data(:,1:n(i),i), pairs, 'lat', '');   diffa(1:n(i),i) = differences(data(:,1:n(i),i), pairs, 'abs', '');	diffs(1:n(i),i) = differences(data(:,1:n(i),i), pairs, 'sign', '');end;disp('Computing means and standard deviations');for i=1:nr_names,   meansl(i) = mean(diffl(1:n(i),i));   stdsl(i) = std(diffl(1:n(i),i));   meansa(i) = mean(diffa(1:n(i),i));   stdsa(i) = std(diffa(1:n(i),i));   meanss(i) = mean(diffs(1:n(i),i));   stdss(i) = std(diffs(1:n(i),i));end;colours = char('r', 'b', 'g', 'm', 'c', 'y', 'w', 'k');if nr_names>length(colours),	disp('Not enough colours for all files! (symmetry)');end;disp(' Write values to file ');for i=1:nr_names,   filename = sprintf('c:\\data\\tmp\\%slatind.dat', namelist(i,1:3))   write_matrix(diffl(1:n(i),i), filename);end;disp('Plotting');clf;	for i=1:nr_names,		if i<length(colours),         c = sprintf('%s:', colours(i));		else         c = 'k:';		end;		plot(diffl(1:n(i),i), c); hold on;	end;   legend(namelist(:,1:3), 1);  hold on;   for i=1:nr_names,		if i<length(colours),         c = sprintf('%so', colours(i));		else         c = 'ko';		end;		errorbar(i, meansl(i), stdsl(i), c); hold on;	end;   xlabel('Subjects'); ylabel('Symmetry measure');   title('Lateralisations-Index');      figure(gcf+1);	for i=1:nr_names,		if i<length(colours),         c = sprintf('%s:', colours(i));		else         c = 'k:';		end;		plot(diffa(1:n(i),i), c); hold on;	end;   for i=1:nr_names,		if i<length(colours),         c = sprintf('%so', colours(i));		else         c = 'ko';		end;		errorbar(i, meansa(i), stdsa(i), c); hold on;	end;   xlabel('Subjects'); ylabel('Symmetry measure');   title('Absolute Lateralisierung');      figure(gcf+1);   for i=1:nr_names,		if i<length(colours),         c = sprintf('%s:', colours(i));		else         c = 'k:';		end;		plot(diffs(1:n(i),i), c); hold on;	end;   for i=1:nr_names,		if i<length(colours),         c = sprintf('%so', colours(i));		else         c = 'ko';		end;		errorbar(i, meanss(i), stdss(i), c); hold on;	end;   xlabel('Subjects'); ylabel('Symmetry measure');   title('Relative Lateralisierung');               