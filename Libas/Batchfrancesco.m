%==================================================================%==================================================================clear all;%%	BatchSnod%%	Markus Junghoefer	[1996]%%%	Function definition%	%%%%%=================================================================%==================================================================TRStatus=1;[NNetFiles,NetFileMat]=ReadFileNames([],'*.RAW','Choose NetStation file:');[ch_UseOverAllGainFile]=IfEmptyInputBo('Do you want to use one special gain and one special zero file ?',[],[],1,1);if ch_UseOverAllGainFile	[GainFile,GainPath,GainFilePath]=ReadFilePath([],'*.GAIN','Please choose the over all gain file:');	[ZeroFile,ZeroPath,ZeroFilePath]=ReadFilePath([],'*.ZERO','Please choose the over all zero file:');	if GainFile==0; GainFile=[]; GainPath=[]; GainFilePath=[]; end	if ZeroFile==0; ZeroFile=[]; ZeroPath=[]; ZeroFilePath=[]; endelse	GainFilePath=[];	ZeroFilePath=[];end%===============FilterNetFile====================================%%Filter 50 Hz LowPassch_LowPassFilt=1;ch_HighPassFilt=0;SampRate=[];if ch_LowPassFilt | ch_HighPassFilt	for FileInd=1:NNetFiles		[NoUse,NoUse,NetFilePath]=GetFileNameOfMat(NetFileMat,FileInd);		[NoUse,NoUse,NoUse,NoUse, ...		NoUse, NoUse, NoUse, NoUse, NoUse, NoUse, NoUse, ...		SampRateTmp,NChan]= ReadRAWHeader(NetFilePath);		if ~isempty(SampRate)			 if SampRateTmp~=SampRate				error('It is not possible to filter in batch mode because of different samp rates in different files !')			end		end		SampRate=SampRateTmp;	endendHighDefFreqsMat=[SampRate 3 0];HighDefRipMat=[3 45];LowDefFreqsMat=[SampRate 40 50]; LowDefRipMat=[3 45];ch_ChooseChannelInd=0;ChanStatusVec=ones(NChan,1);PlotStatus=0;ch_AddSubZeros=0;NZPoints=[];[ch_LowPassFilt,LowB,LowA,ch_HighPassFilt,HighB,HighA,LowFreqsMat,HighFreqsMat] = ...GetHighLowFiltCoeff(SampRate,HighDefFreqsMat,HighDefRipMat,LowDefFreqsMat,LowDefRipMat,...ch_LowPassFilt,ch_HighPassFilt);%=============================================================%===============TransNetGeoHistNew====================================%[EGISFileMat,FileMat]=TransNetGeoHistNew(FileMat,TRStatus,PreTrig,PostTrig,ReTrig,GainFilePath,ZeroFilePath,OldZeroVersion,NGainZeroString,SpecCondVec)[EGISFileMat]=TransNetGeoHist_15(NetFileMat,TRStatus,50,200,1,GainFilePath,ZeroFilePath,0,4);%=============================================================%DeleteFileMat(NetFileMat);%===============CalcAutoEditMat ohne avg ref EEG und ohne flat====================================%[AEMFilePathMat]=CalcAutoEditMat(FileMat,TimeStatusVec,ch_CalcAvgRef,ch_UseSpecChan,...%ch_CalcBaseline,BaseStartPoint,BaseEndPoint,ch_ChooseTimeInd,LFlatWin,ch_CalcFlaMat,ch_UseAWE);[AEMFilePathMat]=CalcAutoEditMat(EGISFileMat,ones(1,251),0,0,1,251,0,8,0,0);%======Suche nach schlechten Kanaelen ==================================%FindBadChan(AEMFilePathMat,AWELimesFac,BatchStatus);FindBadChan(AEMFilePathMat,3,1);%======Suche nach schlechten trials ==================================% [AWEFileMat]=FindBadChanTrial(FilePathMat,AWELimesFac,BatchStatus);FindBadChanTrial(AEMFilePathMat,2.5,1);%===============CalcAutoEditMat mit avg ref EEG und mit flat====================================[AEMFilePathMat]=CalcAutoEditMat(EGISFileMat,ones(1,251),1,1,1,1,251,0,8,1,1);