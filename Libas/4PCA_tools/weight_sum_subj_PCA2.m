% weight_sum_subj_PCA2  !!!!% has different matrix sizes than weight_sum_subj_PCA% uses output of former fubnctions ('virtual electrodes')% in weightsum -files% multiplies each spatial component in compmat% with individual SCADS at*.ar files and saves% weighted sums across electrodes to new files for each% subject ==> one time series for each subject and component%% NOTE !!!!!!!!!!!!!!% output format has spatial weighted sums ('virtual electrodes') as rows% temporal factor scores as columns -- as always. function [] = weight_sum_subj_PCA2(compmat, filemat, outdir, timevec)if nargin < 4	a = readavgfile(filemat(1, :));	timevec = 1:length(a);endif nargin < 3     % if no outdir specified==> outdir = indir		k = findstr(filemat(1,:), ':');	outdir = filemat(1, 1:max(k))else	outdirend% find filenamepart (no directory) of filematk = findstr(filemat(1,:), ':');		fnamevec = max(k)+1:length(filemat(1,:));for fileindex = 1 : size(filemat, 1); 		ERPmat = readavgfile(filemat(fileindex, :)); 		weightsum_mat = ERPmat(:, timevec) * compmat; 			%eval(['save ' outdir filemat(fileindex, fnamevec(1:length(fnamevec)-9)) 'weigh_sum  weightsum_mat  -ascii'])				SaveAvgFile([outdir filemat(fileindex, fnamevec(1:length(fnamevec)-12)) 'scores.at'], weightsum_mat)		fprintf('saving weighted sum to file nummber  %g', fileindex)end			