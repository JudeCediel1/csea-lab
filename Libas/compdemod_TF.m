% complex demodulationfunction[demodmat]=compdemod_TF(filemat);figurefor index = 1:size(filemat,1);        demodmat = [];         atgPath = filemat(index,:);	    [AvgMat,File,Path,FilePath,NTrialAvgVec,StdChanTimeMat,SampRate] = ReadAvgFile(atgPath); 	    % interesting from here          	taxis = 0:1000/SampRate:size(AvgMat,2)*1000/SampRate - 1000/SampRate;	    taxis = taxis/1000;     	M2 = 75;	squarecos1 = (cos(pi/2:(pi-pi/2)/M2:pi-(pi-pi/2)/M2)).^2;		squarecosfunction = [squarecos1 ones(1,length(taxis)-length(squarecos1).*2) fliplr(squarecos1)];		size(squarecosfunction)		[B, A] = butter(4, 0.008);	    freqindex = 1;       for targetfreq = 2:0.5:25                for channel = 1:size(AvgMat,1)                            Xsin(channel,:) = AvgMat(channel,:) .* squarecosfunction .* sin(targetfreq .*2 *pi * taxis);            Xcos(channel,:) = AvgMat(channel,:) .* squarecosfunction .* cos(targetfreq .*2 *pi * taxis);	                XsinF(channel,:) = filtfilt(B,A,Xsin(channel,:));            XcosF(channel,:) = filtfilt(B,A,Xcos(channel,:));                end    		demodmat(:,:,freqindex) = 2 * sqrt(XsinF .^2 + XcosF .^2);        freqindex = freqindex+1;          end       faxis = 2:0.5:25;   taxis = 1:4:size(demodmat,2).*4;    contourf(taxis(100:1300), faxis(6:47), squeeze(mean(demodmat([55:64 88:97],100:1300,6:47)))', 7)    title([filemat(index,:)])    pause(.4)   		%eval(['save ' deblank(atgPath) '.amp.mat demodmat -mat'])    %eval(['save ' deblank(atgPath) '.pha phasemat -ascii'])end